# ZCF Structured Workflow Skill

专业的六阶段 AI 辅助开发工作流，适用于 FastAPI 项目的全生命周期管理。

## 工作流阶段

### 阶段 1：研究 (Research)
**目标**：深入理解需求和技术背景

**执行内容**：
- 分析需求文档或用户描述
- 探索现有代码库结构
- 识别相关技术栈和依赖
- 查找类似实现参考

**输出**：
- 需求理解报告
- 技术方案初步分析

---

### 阶段 2：构思 (Conception)
**目标**：设计技术方案和架构

**执行内容**：
- 设计数据模型和 API 接口
- 规划目录结构
- 选择合适的设计模式
- 评估技术可行性

**输出**：
- 架构设计方案
- API 接口定义
- 数据模型草图

---

### 阶段 3：计划 (Planning)
**目标**：制定详细实施计划

**执行内容**：
- 使用 TodoWrite 创建任务清单
- 评估任务优先级和依赖关系
- 确定实施顺序
- 预估潜在风险

**输出**：
- 结构化任务列表
- 实施路线图

---

### 阶段 4：执行 (Execution)
**目标**：高质量实现代码

**执行内容**：
- 严格按照 SOLID 原则编码
- 遵循文件行数限制（Python < 200 行）
- 保持文件夹整洁（每个文件夹 < 8 个文件）
- 编写清晰的注释和文档

**约束检查**：
- [ ] 单一职责：每个模块/类/函数只做一件事
- [ ] DRY：消除代码重复
- [ ] KISS：保持简单，避免过度设计
- [ ] YAGNI：只实现当前需要的功能
- [ ] 行数检查：每个文件不超过限制
- [ ] 文件夹检查：文件数量不超标

**输出**：
- 可运行的代码
- 符合规范的实现

---

### 阶段 5：优化 (Optimization)
**目标**：提升代码质量和性能

**执行内容**：
- 代码重构（消除坏味道）
- 性能优化
- 错误处理完善
- 日志和监控添加

**检查项**：
- [ ] 僵化性：是否易于修改
- [ ] 冗余性：是否有重复代码
- [ ] 循环依赖：模块是否独立
- [ ] 脆弱性：修改是否影响其他部分
- [ ] 晦涩性：代码是否清晰易懂
- [ ] 不必要复杂性：是否存在过度设计

**输出**：
- 优化后的代码
- 性能提升报告

---

### 阶段 6：评审 (Review)
**目标**：确保代码质量

**执行内容**：
- 自动化测试（如果有）
- 代码审查（Code Review）
- 文档完整性检查
- 架构合理性评估

**检查项**：
- [ ] 所有测试通过
- [ ] 代码符合项目规范
- [ ] 文档完整且准确
- [ ] 无安全漏洞
- [ ] 性能达标

**输出**：
- 评审报告
- 改进建议（如有）

---

## 使用方式

### 完整工作流
```
你：/zcf:workflow 我要实现用户认证系统

Claude：启动六阶段工作流...
[依次执行 Research → Conception → Planning → Execution → Optimization → Review]
```

### 快速模式（跳过某些阶段）
```
你：只做研究和构思阶段

Claude：[仅执行前两个阶段，输出设计方案]
```

---

## 工作流配置

### 约束级别
- **strict**（严格）：强制执行所有约束
- **moderate**（适中）：主要约束，适度灵活
- **loose**（宽松）：仅核心约束

### 默认设置
当前项目配置：**moderate**
- 文件行数：硬性限制（Python < 200 行）
- 文件夹结构：硬性限制（< 8 个文件）
- SOLID 原则：适度检查
- 注释语言：自动检测

---

## 特殊指令

### 跳过评审
```
你：/zcf:workflow 实现登录接口，跳过评审阶段

Claude：[执行前五个阶段，输出代码但不做评审]
```

### 只做重构
```
你：/zcf:workflow 优化用户服务代码

Claude：[从优化阶段开始，执行到评审]
```

---

## 最佳实践

1. **每个阶段输出明确的交付物**
2. **保持与用户的持续沟通**
3. **遇到歧义及时询问**
4. **记录重要决策**
5. **遵循项目既定规范**

---

## 示例对话

```
你：/zcf:workflow 创建任务管理 API

Claude：启动六阶段工作流...

【阶段 1：研究】
正在探索项目结构...
发现：已有基础 FastAPI 框架
需求：任务的增删改查

【阶段 2：构思】
设计方案：
- 模型：Todo (id, title, description, status, created_at)
- API：/api/todos/ (GET, POST, PUT, DELETE)
- 分层：models → schemas → services → api

【阶段 3：计划】
创建任务清单：
□ 创建 Todo 模型
□ 创建 Todo Schema
□ 实现 TodoService
□ 创建 Todo API 路由
□ 编写测试

【阶段 4：执行】
正在实现...
[创建文件，编写代码]

【阶段 5：优化】
检查代码质量...
✓ 无重复代码
✓ 职责分离清晰
⚠️ 建议添加缓存

【阶段 6：评审】
评审结果：
✓ 架构合理
✓ 符合规范
✓ 测试覆盖率 85%

工作流完成！
```
